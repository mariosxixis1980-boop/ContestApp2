<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel CMP</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #fff;
      margin: 0;
    }
    header {
      padding: 15px;
      background: #020617;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    nav {
      background: #020617;
      padding: 10px;
      display: flex;
      gap: 10px;
    }
    nav button {
      padding: 8px 14px;
      background: #2563eb;
      border: none;
      color: white;
      cursor: pointer;
      border-radius: 6px;
    }
    nav button:hover {
      background: #1d4ed8;
    }
    main {
      padding: 20px;
    }
  </style>
</head>
<body>

<header>
  <h2>Admin Panel CMP</h2>
  <button id="logoutBtn">Logout</button>
</header>

<nav>
  <button onclick="showSection('matches')">Î‘Î³ÏÎ½ÎµÏ‚</button>
  <button onclick="showSection('contests')">Î”Î¹Î±Î³Ï‰Î½Î¹ÏƒÎ¼Î¿Î¯</button>
  <button onclick="showSection('users')">Î§ÏÎ®ÏƒÏ„ÎµÏ‚</button>
</nav>

<main id="content">
  <h3>ÎšÎ±Î»Ï‰ÏƒÎ®ÏÎ¸ÎµÏ‚ ÏƒÏ„Î¿ Admin Panel</h3>
  <p>Î•Ï€Î­Î»ÎµÎ¾Îµ ÎµÎ½ÏŒÏ„Î·Ï„Î±.</p>
</main>

<script type="module">
  import { supabase } from './supabase.js';

  // ğŸ”’ PROTECTION
  const sessionRaw = localStorage.getItem('session');
  if (!sessionRaw) location.href = 'login.html';

  const session = JSON.parse(sessionRaw);
  if (!session.is_admin) location.href = 'login.html';

  // LOGOUT
  document.getElementById('logoutBtn').onclick = async () => {
    await supabase.auth.signOut();
    localStorage.clear();
    location.href = 'login.html';
  };

  // NAVIGATION
  window.showSection = (section) => {
    const content = document.getElementById('content');

  if (section === 'matches') {
  content.innerHTML = `
    <h3>Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î‘Î³ÏÎ½Î±</h3>

    <input id="homeTeam" placeholder="Î“Î·Ï€ÎµÎ´Î¿ÏÏ‡Î¿Ï‚" /><br><br>
    <input id="awayTeam" placeholder="Î¦Î¹Î»Î¿Î¾ÎµÎ½Î¿ÏÎ¼ÎµÎ½Î¿Ï‚" /><br><br>
    <input id="matchDate" type="datetime-local" /><br><br>

    <button id="saveMatch">Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î‘Î³ÏÎ½Î±</button>

    <p id="msg"></p>
  `;

  document.getElementById('saveMatch').onclick = async () => {
    const home = document.getElementById('homeTeam').value.trim();
    const away = document.getElementById('awayTeam').value.trim();
    const date = document.getElementById('matchDate').value;
    const msg = document.getElementById('msg');

    if (!home || !away || !date) {
      msg.textContent = 'Î£Ï…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎµ ÏŒÎ»Î± Ï„Î± Ï€ÎµÎ´Î¯Î±';
      return;
    }

    const { error } = await supabase
      .from('matches')
      .insert([{ home_team: home, away_team: away, match_date: date }]);

    if (error) {
      msg.textContent = error.message;
    } else {
      msg.textContent = 'âœ… ÎŸ Î±Î³ÏÎ½Î±Ï‚ Î±Ï€Î¿Î¸Î·ÎºÎµÏÏ„Î·ÎºÎµ';
    }
  };
}
 
</script>

</body>
</html>

