<!doctype html>
<html lang="el">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Login</title>
<style>
body{font-family:system-ui;background:#0b1020;color:#fff;display:flex;min-height:100vh;align-items:center;justify-content:center}
.card{background:#12183a;border-radius:16px;padding:20px;max-width:380px;width:100%}
input,button{width:100%;padding:10px;margin-top:10px;border-radius:10px;border:0}
button{background:#4ade80;font-weight:800;cursor:pointer}
.small{opacity:.8;font-size:13px;margin-top:8px}
</style>
</head>
<body>
<div class="card">
<h2>Login</h2>
<input id="email" placeholder="email"/>
<input id="password" type="password" placeholder="password"/>
<button id="loginBtn">Login</button>
<div class="small" id="msg"></div>
</div>

<script type="module">
import { supabase } from './supabase.js';

const msg = document.getElementById('msg');
document.getElementById('loginBtn').onclick = async ()=>{
  msg.textContent='Σύνδεση...';
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value;
  const { data, error } = await supabase.auth.signInWithPassword({ email, password });
  if(error){ msg.textContent = error.message; return; }
  const isAdmin = (data.user.email === 'mariosxixis1980@gmail.com');
  localStorage.setItem('session', JSON.stringify({ email:data.user.email, isAdmin }));
  location.href = isAdmin ? 'admin.html' : 'dashboard.html';
};
</script>
</body>
</html>
